{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/hogwa/Documents/AdvancedNodeAuth/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/hogwa/Documents/AdvancedNodeAuth/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/hogwa/Documents/AdvancedNodeAuth/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import\"./LoginScreen.css\";var LoginScreen=function LoginScreen(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){if(localStorage.getItem(\"authToken\")){history.push(\"/\");}},[history]);var loginHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};_context.prev=2;_context.next=5;return axios.post(\"/api/auth/login\",{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;localStorage.setItem(\"authToken\",data.token);history.push(\"/\");_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setError(_context.t0.response.data.error);setTimeout(function(){setError(\"\");},5000);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function loginHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-screen\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginHandler,className:\"login-screen__form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login-screen__title\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,id:\"email\",placeholder:\"Email address\",onChange:function onChange(e){return setEmail(e.target.value);},value:email,tabIndex:1})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"password\",children:[\"Password:\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",className:\"login-screen__forgotpassword\",children:\"Forgot Password?\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"password\",autoComplete:\"true\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,tabIndex:2})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"login-screen__subtext\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})});};export default LoginScreen;","map":{"version":3,"sources":["C:/Users/hogwa/documents/advancednodeauth/client/src/components/screens/LoginScreen.js"],"names":["useState","useEffect","axios","Link","LoginScreen","history","email","setEmail","password","setPassword","error","setError","localStorage","getItem","push","loginHandler","e","preventDefault","config","header","post","data","setItem","token","response","setTimeout","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./LoginScreen.css\";\r\n\r\nconst LoginScreen = ({ history }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"authToken\")) {\r\n      history.push(\"/\");\r\n    }\r\n  }, [history]);\r\n\r\n  const loginHandler = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const config = {\r\n      header: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"/api/auth/login\",\r\n        { email, password },\r\n        config\r\n      );\r\n\r\n      localStorage.setItem(\"authToken\", data.token);\r\n\r\n      history.push(\"/\");\r\n    } catch (error) {\r\n      setError(error.response.data.error);\r\n      setTimeout(() => {\r\n        setError(\"\");\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-screen\">\r\n      <form onSubmit={loginHandler} className=\"login-screen__form\">\r\n        <h3 className=\"login-screen__title\">Login</h3>\r\n        {error && <span className=\"error-message\">{error}</span>}\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"email\">Email:</label>\r\n          <input\r\n            type=\"email\"\r\n            required\r\n            id=\"email\"\r\n            placeholder=\"Email address\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            tabIndex={1}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">\r\n            Password:{\" \"}\r\n            <Link to=\"/forgotpassword\" className=\"login-screen__forgotpassword\">\r\n              Forgot Password?\r\n            </Link>\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            required\r\n            id=\"password\"\r\n            autoComplete=\"true\"\r\n            placeholder=\"Enter password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n            tabIndex={2}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Login\r\n        </button>\r\n\r\n        <span className=\"login-screen__subtext\">\r\n          Don't have an account? <Link to=\"/register\">Register</Link>\r\n        </span>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n"]},"metadata":{},"sourceType":"module"}